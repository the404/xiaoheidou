<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1, user-scalable=no;" />
<meta name="keywords" content="欢乐谷,上海欢乐谷,上海欢乐谷微信,上海欢乐谷照片墙,旅游,主题公园,探险,时尚,动感,互动力,ipow;" />
<meta name="description" content='上海欢乐谷是继深圳欢乐谷、北京欢乐谷、成都欢乐谷之后，欢乐谷品牌全国连锁发展的重要布点，一期项目投资40余亿元，于2009年暑期建成开放。致力于打造目前中国规模最大，项目最多，景色最美，科技含量最高的主题公园。' />
<title>照片墙|上海欢乐谷官方微信</title>
<link href="../Css/base.css" rel="stylesheet" />
<script src="../Js/jquery.1.4.js" type="text/javascript"></script>
</head>

<body>
	<!--//页面头部-->
	<!--#include file="/shanghai/Include/head.htm"-->
    <!--End页面头部-->
    <!--//页面内容--> 
    <section id="wrap">
        <div id="content03">
            <ul class="photoL">
                <li>
                    <div class="photoTop">
                    	<a class="toBig" href="javascript:;">
                        	<img src="../Images/photo01.jpg" Yimg="../Images/photo01.jpg" alt="" />
                        </a>
                        <div class="praise">
                            <a href="javascript:;"></a>
                            <label class="praiseNum">9999</label>
                        </div>
                        <div class="redHeart">
                        	<a href="javascript:;">
                            	<img src="../Images/heart02.png" alt="" />
                                <img class="hearted" src="../Images/heart03.png" alt="" />
                            </a>
                        </div>
                    </div>
                    <div class="mood">
                        <p>今天很开心。到欢乐谷居然碰到了3个可爱的公仔，好萌有没有！</p>
                    </div>
                </li>
                <li>
                    <div class="photoTop">
                    	<a class="toBig" href="javascript:;">
                      		<img src="../Images/photo02.jpg" Yimg="../Images/photo02.jpg" alt="" />
                      	</a>
                        <div class="praise">
                            <a href="javascript:;"></a>
                            <label class="praiseNum">9999</label>
                        </div>
                        <div class="redHeart">
                        	<a href="javascript:;">
                            	<img src="../Images/heart02.png" alt="" />
                                <img class="hearted" src="../Images/heart03.png" alt="" />
                            </a>
                        </div>
                    </div>
                    <div class="mood">
                        <p>今天很开心。</p>
                    </div>
                </li>
                <li>
                    <div class="photoTop">
                    	<a class="toBig" href="javascript:;">
                      		<img src="../Images/photo02.jpg" Yimg="../Images/photo02.jpg" alt="" />
                      	</a>
                        <div class="praise">
                            <a href="javascript:;"></a>
                            <label class="praiseNum">9999</label>
                        </div>
                        <div class="redHeart">
                        	<a href="javascript:;">
                            	<img src="../Images/heart02.png" alt="" />
                                <img class="hearted" src="../Images/heart03.png" alt="" />
                            </a>
                        </div>
                    </div>
                    <div class="mood">
                        <p>今天很开心。</p>
                    </div>
                </li>
            </ul>
            <ul class="photoR">
                <li>
                    <div class="photoTop">
                    	<a class="toBig" href="javascript:;">
                        	<img src="../Images/photo03.jpg" Yimg="../Images/photo03.jpg" alt="" />
                        </a>
                        <div class="praise">
                            <a href="javascript:;"></a>
                            <label class="praiseNum">9999</label>
                        </div>
                        <div class="redHeart">
                        	<a href="javascript:;">
                        		<img src="../Images/heart02.png" alt="" />
                                <img class="hearted" src="../Images/heart03.png" alt="" />
                            </a>
                        </div>
                    </div>
                    <div class="mood">
                        <p>今天很开心。今天很开心。今天很开心。今天很开心。今天很开心。今天很开心。今天很开心。</p>
                    </div>
            </li>
                <li>
                    <div class="photoTop">
                    	<a class="toBig" href="javascript:;">
                        	<img src="../Images/photo03.jpg" Yimg="../Images/photo03.jpg" alt="" />
                        </a>
                        <div class="praise">
                            <a href="javascript:;"></a>
                            <label class="praiseNum">9999</label>
                        </div>
                        <div class="redHeart">
                        	<a href="javascript:;">
                        		<img src="../Images/heart02.png" alt="" />
                                <img class="hearted" src="../Images/heart03.png" alt="" />
                            </a>
                        </div>
                    </div>
                    <div class="mood">
                        <p>今天很开心。今天很开心。今天很开心。今天很开心。今天很开心。今天很开心。今天很开心。</p>
                    </div>
              </li>
              <li>
                    <div class="photoTop">
                    	<a class="toBig" href="javascript:;">
                        	<img src="../Images/photo01.jpg" Yimg="../Images/photo01.jpg" alt="" />
                        </a>
                        <div class="praise">
                            <a href="javascript:;"></a>
                            <label class="praiseNum">9999</label>
                        </div>
                        <div class="redHeart">
                        	<a href="javascript:;">
                            	<img src="../Images/heart02.png" alt="" />
                                <img class="hearted" src="../Images/heart03.png" alt="" />
                            </a>
                        </div>
                    </div>
                    <div class="mood">
                        <p>今天很开心。到欢乐谷居然碰到了3个可爱的公仔，好萌有没有！</p>
                    </div>
                </li>
            </ul>
            <div class="clear"></div>
        </div>
        <div id="uploadingBox">
        	<form method="post">
            <div class="photoBox">
                <img src="../Images/img/photo01.jpg" alt="" />
            </div>
            <div class="photoIntroBox">
                <textarea class="photoIntro" id="photoIntro" name="photoIntro" placeHolder="请输入对照片的描述" onfocus="javascript:ResizeTextarea(this,2);" onkeyup="javascript:ResizeTextarea(this,2);"></textarea>
                <input type="submit" class="photoSub" value="确定">
            </div>
    </form>
        </div>
        <div class="rich_media_tool" style="padding:10px 0 30px 0;">
            <div class="meta_primary">阅读 <span id="rp">0</span></div>
            <a class="meta_primary meta_praise" href="javascript:;" id="like">
                <i class="icon_praise_gray"></i>
                <span class="praise_num">0</span>
            </a>
        </div>
    </section>
    <div style="display:none; width:0; height:0; overflow:hidden; line-height:0px;">
     <!--//版权信息-->
	<!--#include file="/shanghai/Include/foot.htm"-->
    <!--End版权信息--> 
    </div>
    <div class="shareBtn">
        <a class="moment" href="javascript:;"><span></span>欢乐谷的欢乐瞬间</a>
        <a class="shareToo" href="javascript:;">我也要分享</a>
        <input type="file" class="file" name="fileField" onchange="javascript:window.location.href='photo.shtml'"  id="file1" />
    </div>
    <div class="bigPic">
        <div id="bigPicWrap">
            <ul id="bigPicBox">
                <li><span class="load"></span></li>
                <li><span class="load"></span></li>
                <li><span class="load"></span></li>
            </ul>
        </div>
        <a id="close_big_pic" href="javascript:;"></a>
    </div>
</body>
</html>
<!--<script src="..../Js/iScroll.js" type="text/javascript" ></script>
<script src="..../Js/scrollBox2.js" type="text/javascript"></script>-->
<script src="..../Js/photoTab.js" type="text/javascript"></script>
<script>
var oDefault=function (e) { e.preventDefault(); };
//显示上传页面
var oPhotoList=$("#content03");
var oUploadPage=$("#uploadingBox");
var oShareBtn=$(".shareBtn");
var oRichBox=$(".rich_media_tool");
function showUpload(){
	oPhotoList.hide();
	oShareBtn.hide();
	oRichBox.hide();
	oUploadPage.show();
	}
//隐藏上传页面显示照片列表页
function hideUpload(){
	oUploadPage.hide();
	oPhotoList.show();
	oShareBtn.show();
	oRichBox.show();
	}

$(".moment").click(function(){
	$("html,body").animate({scrollTop:"0px"});
	});

//点赞后变实心红心	
$(".redHeart").click(function(){
	var likedIndex=$(this).index(".redHeart");
	$(this).find(".hearted").addClass("liked");
	});
//取消点赞后变空心红心
/*$(".redHeart").click(function(){
	var likedIndex=$(this).index(".redHeart");
	$(this).find(".hearted").removeClass("liked");
	});*/
	
//点击显示照片大图
var aToBig=$(".toBig");
var oBigPic=$("#bigPicBox li");
//预加载loading图片
var oImg=new Image();
oImg.src="../Images/loading.gif";
//缩略图点击事件
aToBig.click(function(){
	document.addEventListener('touchmove', oDefault, false);
	var i=$(this).index();
	var lastSrc,nextSrc;
	photoIndex=$(this).parents("li").index();
	var bigSrc=$(this).find("img").attr("Yimg");
	$(".bigPic").show();
	if($(this).parents(".photoL").size()>0){
		lR=0;
		}else{
			lR=1;
			}
		/*lR=$(this).parents(".photoUl").index();*/
		oBigPic=$("#bigPicBox li");
		oBigPic.eq(0).css("background-image","none");
		oBigPic.eq(1).css("background-image","none");
		oBigPic.eq(2).css("background-image","none");
		nextSrc=getSrcByNext();
		lastSrc=getSrcByPre();
		oBigPic.eq(0).html('<img src="'+lastSrc+'" class="realPic" /><span class="load"></span>');
		oBigPic.eq(0).find("img")[0].onload = function(){
			oBigPic.eq(0).find("span").css("opacity",0);
			oBigPic.eq(0).css("background-image","url("+lastSrc+")");
		}
		oBigPic.eq(1).html('<img src="'+bigSrc+'" class="realPic" /><span class="load"></span>');
		oBigPic.eq(1).find("img")[0].onload = function(){
			oBigPic.eq(1).find("span").css("opacity",0);
			oBigPic.eq(1).css("background-image","url("+bigSrc+")");
		}
		oBigPic.eq(2).html('<img src="'+nextSrc+'" class="realPic" /><span class="load"></span>');
		oBigPic.eq(2).find("img")[0].onload = function(){
			oBigPic.eq(2).find("span").css("opacity",0);
			oBigPic.eq(2).css("background-image","url("+nextSrc+")");
		}
	});
	
$(".bigPic").click(function(){
	document.removeEventListener('touchmove', oDefault, false);
	$(".bigPic").hide();
});
	
//照片切换
var oBigPicBox = document.getElementById("bigPicBox");
var aBigPic = oBigPicBox.getElementsByTagName("li");
var lR=0;  //判断左右
var photoIndex=0;  //图片在列表内的位置

var iNow = 1; 
var startX = 0;
var startY = 0;
var iLeft = 0; 
var x=0;
var y=0;
var touch = null; 

$("#bigPicWrap").photoTab({preFn:pre,nextFn:next});

var tempIndex=0;

function next(){
	var ls=$(".photoL li").size();
	var rs=$(".photoR li").size();
	var maxlr=ls>rs?0:1;
	var maxIndex=ls>rs?ls-1:rs-1;
	if(lR%2==maxlr&&maxIndex==photoIndex){
			photoIndex=0;
			lR=0;
		}else{
			if(lR%2==0){
			}else{
				photoIndex++;
			}
		lR++;
		}
	return getSrcByNext();
	}
function pre(){
	if(photoIndex==0&&lR%2==0){
		var ls=$(".photoL li").size();
		var rs=$(".photoR li").size();
		if(ls>rs){
			lR=0;
			photoIndex=ls-1;
			}else{
			lR=1;
			photoIndex=rs-1;
			}
		}else{
		if(lR%2==0){
			photoIndex--;
		}else{
		}
		lR--;
		}
	return getSrcByPre();
	}
function getSrcByNext(){
	var tempIndex=photoIndex;
	var tempLR=lR;
	
	var lastImg;
	var ls=$(".photoL li").size();
	var rs=$(".photoR li").size();
	if(tempLR%2==0){
	}else{
		tempIndex++;
	}
	tempLR++;
	
	var photoSrc=$("#content03 ul").eq(tempLR%2).children("li").eq(tempIndex).find(".toBig").children("img").attr("Yimg");
	if(photoSrc==null){
		photoSrc=$("#content03 ul").eq(0).children("li").eq(0).find(".toBig").children("img").attr("Yimg");
		}
	return photoSrc;
	}
function getSrcByPre(){
	var tempIndex=photoIndex;
	var tempLR=lR;
	if(tempIndex==0&&tempLR%2==0){
		var ls=$(".photoL li").size();
		var rs=$(".photoR li").size();
		if(ls>rs){
			tempLR=0;
			tempIndex=ls-1;
			}else{
			tempLR=1;
			tempIndex=rs-1;
			}
		}else{
	if(tempLR%2==0){
		tempIndex--;
	}else{
	}
	tempLR--;
		}
	var photoSrc=$("#content03 ul").eq(tempLR%2).children("li").eq(tempIndex).find(".toBig").children("img").attr("Yimg");
	return photoSrc;
	}

//控制文本域自适应文本高度
var agt = navigator.userAgent.toLowerCase();
var is_op = (agt.indexOf("opera") != -1);
var is_ie = (agt.indexOf("msie") != -1) && document.all && !is_op;
function ResizeTextarea(a,row){
    if(!a){return}
    if(!row)
        row=5;
    var b=a.value.split("\n");
    var c=is_ie?1:0;
    c+=b.length;
    var d=a.cols;
    if(d<=20){d=40}
    for(var e=0;e<b.length;e++){
        if(b[e].length>=d){
            c+=Math.ceil(b[e].length/d)
        }
    }
    c=Math.max(c,row);
    if(c!=a.rows){
        a.rows=c;
    }
}
var oPhotoIntro=document.getElementById("photoIntro");
oPhotoIntro.onclick=function(){
	ResizeTextarea(this,2);
	}
</script>